<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>AnimatedWaveDemo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            AnimatedWaveDemo 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/tk/sample/demos-en/aniwave_rb.html">ext/tk/sample/demos-en/aniwave.rb</a></li>
            
            <li><a href="../files/ext/tk/sample/demos-jp/aniwave_rb.html">ext/tk/sample/demos-jp/aniwave.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>animated wave</p>

<p>animated wave</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-basicMotion">basicMotion</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-move">move</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-reverser">reverser</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-stop">stop</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(frame, dir=:left)
            
            <a href="../classes/AnimatedWaveDemo.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/287a34ae0dfc23e4158f67cb7783d239f202c368/ext/tk/sample/demos-en/aniwave.rb#L50" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/tk/sample/demos-en/aniwave.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">frame</span>, <span class="ruby-identifier">dir</span>=<span class="ruby-value">:left</span>)
  <span class="ruby-ivar">@direction</span> = <span class="ruby-identifier">dir</span>

  <span class="ruby-comment"># create canvas widget</span>
  <span class="ruby-ivar">@c</span> = <span class="ruby-constant">TkCanvas</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">frame</span>, <span class="ruby-value">:width=</span><span class="ruby-operator">&gt;</span><span class="ruby-number">300</span>, <span class="ruby-value">:height=</span><span class="ruby-operator">&gt;</span><span class="ruby-number">200</span>,
                    <span class="ruby-value">:background=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;black&#39;</span>)
  <span class="ruby-ivar">@c</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-value">:padx=</span><span class="ruby-operator">&gt;</span><span class="ruby-number">10</span>, <span class="ruby-value">:pady=</span><span class="ruby-operator">&gt;</span><span class="ruby-number">10</span>, <span class="ruby-value">:expand=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)

  <span class="ruby-comment"># Creates a coordinates list of a wave.</span>
  <span class="ruby-ivar">@waveCoords</span> = []
  <span class="ruby-ivar">@backupCoords</span> = []
  <span class="ruby-identifier">n</span> = <span class="ruby-number">0</span>
  (<span class="ruby-number">-10</span><span class="ruby-operator">..</span><span class="ruby-number">300</span>).<span class="ruby-identifier">step</span>(<span class="ruby-number">5</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@waveCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span>, <span class="ruby-number">100</span>]; <span class="ruby-ivar">@backupCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span>, <span class="ruby-number">100</span>] }
  <span class="ruby-identifier">n</span> = <span class="ruby-number">305</span>
  <span class="ruby-ivar">@waveCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span>, <span class="ruby-number">0</span>]; <span class="ruby-ivar">@backupCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span>, <span class="ruby-number">0</span>]
  <span class="ruby-ivar">@waveCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span><span class="ruby-operator">+</span><span class="ruby-number">5</span>, <span class="ruby-number">200</span>]; <span class="ruby-ivar">@backupCoords</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">n</span><span class="ruby-operator">+</span><span class="ruby-number">5</span>, <span class="ruby-number">200</span>]
  <span class="ruby-ivar">@coordsLen</span> = <span class="ruby-ivar">@waveCoords</span>.<span class="ruby-identifier">length</span>

  <span class="ruby-comment"># Create a smoothed line and arrange for its coordinates to be the</span>
  <span class="ruby-comment"># contents of the variable waveCoords.</span>
  <span class="ruby-ivar">@line</span> = <span class="ruby-constant">TkcLine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@c</span>, <span class="ruby-ivar">@waveCoords</span>,
                      <span class="ruby-value">:width=</span><span class="ruby-operator">&gt;</span><span class="ruby-number">1</span>, <span class="ruby-value">:fill=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-value">:smooth=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>)

  <span class="ruby-comment"># Main animation &quot;loop&quot;.</span>
  <span class="ruby-comment"># Theoretically 100 frames-per-second (==10ms between frames)</span>
  <span class="ruby-ivar">@timer</span> = <span class="ruby-constant">TkTimer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-number">10</span>){ <span class="ruby-identifier">basicMotion</span>; <span class="ruby-identifier">reverser</span> }

  <span class="ruby-comment"># Arrange for the animation loop to stop when the canvas is deleted</span>
  <span class="ruby-ivar">@c</span>.<span class="ruby-identifier">bindtags_unshift</span>(<span class="ruby-constant">TkBindTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;Destroy&#39;</span>){ <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stop</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-basicMotion">
            
              <b>basicMotion</b>()
            
            <a href="../classes/AnimatedWaveDemo.html#method-i-basicMotion" name="method-i-basicMotion" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Basic motion handler. Given what direction the wave is travelling in, it
advances the y coordinates in the coordinate-list one step in that
direction.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-basicMotion_source')" id="l_method-i-basicMotion_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/287a34ae0dfc23e4158f67cb7783d239f202c368/ext/tk/sample/demos-en/aniwave.rb#L84" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-basicMotion_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/tk/sample/demos-en/aniwave.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">basicMotion</span>
  <span class="ruby-ivar">@backupCoords</span>, <span class="ruby-ivar">@waveCoords</span> = <span class="ruby-ivar">@waveCoords</span>, <span class="ruby-ivar">@backupCoords</span>
  (<span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@coordsLen</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@direction</span> <span class="ruby-operator">==</span> <span class="ruby-value">:left</span>
      <span class="ruby-ivar">@waveCoords</span>[<span class="ruby-identifier">idx</span>][<span class="ruby-number">1</span>] = <span class="ruby-ivar">@backupCoords</span>[(<span class="ruby-identifier">idx</span><span class="ruby-operator">+</span><span class="ruby-number">1</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@coordsLen</span>)<span class="ruby-operator">?</span> <span class="ruby-number">0</span><span class="ruby-operator">:</span> <span class="ruby-identifier">idx</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>][<span class="ruby-number">1</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@waveCoords</span>[<span class="ruby-identifier">idx</span>][<span class="ruby-number">1</span>] = <span class="ruby-ivar">@backupCoords</span>[(<span class="ruby-identifier">idx</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)<span class="ruby-operator">?</span> <span class="ruby-number">-1</span><span class="ruby-operator">:</span> <span class="ruby-identifier">idx</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>][<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-ivar">@line</span>.<span class="ruby-identifier">coords</span>(<span class="ruby-ivar">@waveCoords</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-move">
            
              <b>move</b>()
            
            <a href="../classes/AnimatedWaveDemo.html#method-i-move" name="method-i-move" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>animation control</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-move_source')" id="l_method-i-move_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/287a34ae0dfc23e4158f67cb7783d239f202c368/ext/tk/sample/demos-en/aniwave.rb#L108" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-move_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/tk/sample/demos-en/aniwave.rb, line 108</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">move</span>
  <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">start</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reverser">
            
              <b>reverser</b>()
            
            <a href="../classes/AnimatedWaveDemo.html#method-i-reverser" name="method-i-reverser" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Oscillation handler. This detects whether to reverse the direction of the
wave by checking to see if the peak of the wave has moved off the screen
(whose size we know already.)</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-reverser_source')" id="l_method-i-reverser_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/287a34ae0dfc23e4158f67cb7783d239f202c368/ext/tk/sample/demos-en/aniwave.rb#L99" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-reverser_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/tk/sample/demos-en/aniwave.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">reverser</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@waveCoords</span>[<span class="ruby-number">0</span>][<span class="ruby-number">1</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">10</span>
    <span class="ruby-ivar">@direction</span> = <span class="ruby-value">:right</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@waveCoords</span>[<span class="ruby-number">-1</span>][<span class="ruby-number">1</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">10</span>
    <span class="ruby-ivar">@direction</span> = <span class="ruby-value">:left</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-stop">
            
              <b>stop</b>()
            
            <a href="../classes/AnimatedWaveDemo.html#method-i-stop" name="method-i-stop" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-stop_source')" id="l_method-i-stop_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/287a34ae0dfc23e4158f67cb7783d239f202c368/ext/tk/sample/demos-en/aniwave.rb#L112" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-stop_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/tk/sample/demos-en/aniwave.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">stop</span>
  <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stop</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    