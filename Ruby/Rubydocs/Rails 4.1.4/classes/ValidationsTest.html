<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ValidationsTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ValidationsTest 
            
                <span class="parent">&lt; 
                    
                    ActiveModel::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activemodel/test/cases/validations_test_rb.html">activemodel/test/cases/validations_test.rb</a></li>
            
            <li><a href="../files/activerecord/test/cases/validations_test_rb.html">activerecord/test/cases/validations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="ValidationsTest/CustomStrictValidationException.html">ValidationsTest::CustomStrictValidationException</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-teardown">teardown</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_accessing_instance_of_validator_on_an_attribute">test_accessing_instance_of_validator_on_an_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_without_validation">test_create_without_validation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_does_not_modify_options_argument">test_does_not_modify_options_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_double_attr_validation_and_error_msg">test_double_attr_validation_and_error_msg</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dup_validity_is_independent">test_dup_validity_is_independent</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_error_on_create">test_error_on_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_error_on_given_context">test_error_on_given_context</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_error_on_update">test_error_on_update</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_errors_conversions">test_errors_conversions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_errors_empty_after_errors_on_check">test_errors_empty_after_errors_on_check</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_errors_on_base">test_errors_on_base</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_errors_on_base_with_symbol_message">test_errors_on_base_with_symbol_message</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_errors_on_nested_attributes_expands_name">test_errors_on_nested_attributes_expands_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exception_on_create_bang_many">test_exception_on_create_bang_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exception_on_create_bang_many_with_block">test_exception_on_create_bang_many_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exception_on_create_bang_with_block">test_exception_on_create_bang_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_record_exception">test_invalid_record_exception</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_should_be_the_opposite_of_valid">test_invalid_should_be_the_opposite_of_valid</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_validator">test_invalid_validator</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_list_of_validators_for_model">test_list_of_validators_for_model</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_list_of_validators_on_an_attribute">test_list_of_validators_on_an_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_list_of_validators_on_multiple_attributes">test_list_of_validators_on_multiple_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_list_of_validators_will_be_empty_when_empty">test_list_of_validators_will_be_empty_when_empty</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition">test_multiple_errors_per_attr_iteration_with_full_error_composition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setup_is_deprecated_but_still_receives_klass">test_setup_is_deprecated_but_still_receives_klass</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_single_attr_validation_and_error_msg">test_single_attr_validation_and_error_msg</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_single_error_per_attr_iteration">test_single_error_per_attr_iteration</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_single_field_validation">test_single_field_validation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_custom_exception">test_strict_validation_custom_exception</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_error_message">test_strict_validation_error_message</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_in_custom_validator_helper">test_strict_validation_in_custom_validator_helper</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_in_validates">test_strict_validation_in_validates</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_not_fails">test_strict_validation_not_fails</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_strict_validation_particular_validator">test_strict_validation_particular_validator</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_throw_away_typing">test_throw_away_typing</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validate_block">test_validate_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validate_block_with_params">test_validate_block_with_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_acceptance_of_as_database_column">test_validates_acceptance_of_as_database_column</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_acceptance_of_with_non_existent_table">test_validates_acceptance_of_with_non_existent_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_each">test_validates_each</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_each_custom_reader">test_validates_each_custom_reader</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_with_bang">test_validates_with_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validates_with_false_hash_value">test_validates_with_false_hash_value</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validation_order">test_validation_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validation_with_if_and_on">test_validation_with_if_and_on</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validation_with_message_as_proc">test_validation_with_message_as_proc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validations_on_the_instance_level">test_validations_on_the_instance_level</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_validators">test_validators</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-validate">validate</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <b>setup</b>(klass)
            
            <a href="../classes/ValidationsTest.html#method-i-setup" name="method-i-setup" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L373" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-ivar">@old_klass</span> = <span class="ruby-identifier">klass</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-teardown">
            
              <b>teardown</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-teardown" name="method-i-teardown" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-teardown_source')" id="l_method-i-teardown_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L14" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-teardown_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 14</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">teardown</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">clear_validators!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_accessing_instance_of_validator_on_an_attribute">
            
              <b>test_accessing_instance_of_validator_on_an_attribute</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_accessing_instance_of_validator_on_an_attribute" name="method-i-test_accessing_instance_of_validator_on_an_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_accessing_instance_of_validator_on_an_attribute_source')" id="l_method-i-test_accessing_instance_of_validator_on_an_attribute_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L259" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_accessing_instance_of_validator_on_an_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_accessing_instance_of_validator_on_an_attribute</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_length_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">10</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">10</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:title</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">options</span>[<span class="ruby-value">:minimum</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_without_validation">
            
              <b>test_create_without_validation</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_create_without_validation" name="method-i-test_create_without_validation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_without_validation_source')" id="l_method-i-test_create_without_validation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L87" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_create_without_validation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_without_validation</span>
  <span class="ruby-identifier">reply</span> = <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>(<span class="ruby-value">:validate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_does_not_modify_options_argument">
            
              <b>test_does_not_modify_options_argument</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_does_not_modify_options_argument" name="method-i-test_does_not_modify_options_argument" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_does_not_modify_options_argument_source')" id="l_method-i-test_does_not_modify_options_argument_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L349" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_does_not_modify_options_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 349</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_does_not_modify_options_argument</span>
  <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span> }
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span> }, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_double_attr_validation_and_error_msg">
            
              <b>test_double_attr_validation_and_error_msg</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_double_attr_validation_and_error_msg" name="method-i-test_double_attr_validation_and_error_msg" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_double_attr_validation_and_error_msg_source')" id="l_method-i-test_double_attr_validation_and_error_msg_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L38" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_double_attr_validation_and_error_msg_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_double_attr_validation_and_error_msg</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">invalid?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>, <span class="ruby-string">&quot;A reply without title should mark that attribute as invalid&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is Empty&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;title&quot;</span>], <span class="ruby-string">&quot;A reply without title should contain an error&quot;</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:content</span>].<span class="ruby-identifier">any?</span>, <span class="ruby-string">&quot;A reply without content should mark that attribute as invalid&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is Empty&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;content&quot;</span>], <span class="ruby-string">&quot;A reply without content should contain an error&quot;</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dup_validity_is_independent">
            
              <b>test_dup_validity_is_independent</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_dup_validity_is_independent" name="method-i-test_dup_validity_is_independent" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dup_validity_is_independent_source')" id="l_method-i-test_dup_validity_is_independent_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L355" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dup_validity_is_independent_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 355</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dup_validity_is_independent</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Literature&quot;</span>)
  <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">valid?</span>

  <span class="ruby-identifier">duped</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">duped</span>.<span class="ruby-identifier">title</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">duped</span>.<span class="ruby-identifier">invalid?</span>

  <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">duped</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&#39;Mathematics&#39;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">duped</span>.<span class="ruby-identifier">valid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_error_on_create">
            
              <b>test_error_on_create</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_error_on_create" name="method-i-test_error_on_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_error_on_create_source')" id="l_method-i-test_error_on_create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L16" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_error_on_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_error_on_create</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;Wrong Create&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>, <span class="ruby-string">&quot;A reply with a bad title should mark that attribute as invalid&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is Wrong Create&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>], <span class="ruby-string">&quot;A reply with a bad content should contain an error&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_error_on_given_context">
            
              <b>test_error_on_given_context</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_error_on_given_context" name="method-i-test_error_on_given_context" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_error_on_given_context_source')" id="l_method-i-test_error_on_given_context_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L37" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_error_on_given_context_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_error_on_given_context</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Valid title&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>(<span class="ruby-value">:special_case</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Invalid&quot;</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:author_name</span>].<span class="ruby-identifier">join</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-string">&quot;secret&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;Good&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>(<span class="ruby-value">:special_case</span>)

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">save</span>(<span class="ruby-value">:context</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:special_case</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Invalid&quot;</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:author_name</span>].<span class="ruby-identifier">join</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-string">&quot;secret&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">save</span>(<span class="ruby-value">:context</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:special_case</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_error_on_update">
            
              <b>test_error_on_update</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_error_on_update" name="method-i-test_error_on_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_error_on_update_source')" id="l_method-i-test_error_on_update_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L24" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_error_on_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_error_on_update</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;Bad&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;Good&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">save</span>, <span class="ruby-string">&quot;First save should be successful&quot;</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;Wrong Update&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">save</span>, <span class="ruby-string">&quot;Second save should fail&quot;</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>, <span class="ruby-string">&quot;A reply with a bad title should mark that attribute as invalid&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is Wrong Update&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>], <span class="ruby-string">&quot;A reply with a bad content should contain an error&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_errors_conversions">
            
              <b>test_errors_conversions</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_errors_conversions" name="method-i-test_errors_conversions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_errors_conversions_source')" id="l_method-i-test_errors_conversions_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L167" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_errors_conversions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_errors_conversions</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-node">%w(title content)</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>

  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">to_xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;errors&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;error&gt;Title can&#39;t be blank&lt;/error&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;error&gt;Content can&#39;t be blank&lt;/error&gt;}</span>, <span class="ruby-identifier">xml</span>

  <span class="ruby-identifier">hash</span> = {}
  <span class="ruby-identifier">hash</span>[<span class="ruby-value">:title</span>] = [<span class="ruby-string">&quot;can&#39;t be blank&quot;</span>]
  <span class="ruby-identifier">hash</span>[<span class="ruby-value">:content</span>] = [<span class="ruby-string">&quot;can&#39;t be blank&quot;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">to_json</span>, <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">to_json</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_errors_empty_after_errors_on_check">
            
              <b>test_errors_empty_after_errors_on_check</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_errors_empty_after_errors_on_check" name="method-i-test_errors_empty_after_errors_on_check" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_errors_empty_after_errors_on_check_source')" id="l_method-i-test_errors_empty_after_errors_on_check_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_errors_empty_after_errors_on_check_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_errors_empty_after_errors_on_check</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_errors_on_base">
            
              <b>test_errors_on_base</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_errors_on_base" name="method-i-test_errors_on_base" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_errors_on_base_source')" id="l_method-i-test_errors_on_base_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L80" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_errors_on_base_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_errors_on_base</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;Mismatch&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:base</span>, <span class="ruby-string">&quot;Reply is not dignifying&quot;</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">inject</span>([]) { <span class="ruby-operator">|</span><span class="ruby-identifier">result</span>, <span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">error</span>] }

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;Reply is not dignifying&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:base</span>]

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;Title is Empty&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;Reply is not dignifying&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_errors_on_base_with_symbol_message">
            
              <b>test_errors_on_base_with_symbol_message</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_errors_on_base_with_symbol_message" name="method-i-test_errors_on_base_with_symbol_message" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_errors_on_base_with_symbol_message_source')" id="l_method-i-test_errors_on_base_with_symbol_message_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L95" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_errors_on_base_with_symbol_message_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_errors_on_base_with_symbol_message</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;Mismatch&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:base</span>, <span class="ruby-value">:invalid</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">inject</span>([]) { <span class="ruby-operator">|</span><span class="ruby-identifier">result</span>, <span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">error</span>] }

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is invalid&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:base</span>]

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;Title is Empty&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;is invalid&quot;</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_errors_on_nested_attributes_expands_name">
            
              <b>test_errors_on_nested_attributes_expands_name</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_errors_on_nested_attributes_expands_name" name="method-i-test_errors_on_nested_attributes_expands_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_errors_on_nested_attributes_expands_name_source')" id="l_method-i-test_errors_on_nested_attributes_expands_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L74" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_errors_on_nested_attributes_expands_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_errors_on_nested_attributes_expands_name</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;replies.name&quot;</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;can&#39;t be blank&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;Replies name can&#39;t be blank&quot;</span>], <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">full_messages</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exception_on_create_bang_many">
            
              <b>test_exception_on_create_bang_many</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_exception_on_create_bang_many" name="method-i-test_exception_on_create_bang_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exception_on_create_bang_many_source')" id="l_method-i-test_exception_on_create_bang_many_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L65" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_exception_on_create_bang_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exception_on_create_bang_many</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">create!</span>([ { <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;OK&quot;</span> }, { <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Wrong Create&quot;</span> }])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exception_on_create_bang_many_with_block">
            
              <b>test_exception_on_create_bang_many_with_block</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_exception_on_create_bang_many_with_block" name="method-i-test_exception_on_create_bang_many_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exception_on_create_bang_many_with_block_source')" id="l_method-i-test_exception_on_create_bang_many_with_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L79" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_exception_on_create_bang_many_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exception_on_create_bang_many_with_block</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">create!</span>([{ <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;OK&quot;</span> }, { <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Wrong Create&quot;</span> }]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exception_on_create_bang_with_block">
            
              <b>test_exception_on_create_bang_with_block</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_exception_on_create_bang_with_block" name="method-i-test_exception_on_create_bang_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exception_on_create_bang_with_block_source')" id="l_method-i-test_exception_on_create_bang_with_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L71" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_exception_on_create_bang_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exception_on_create_bang_with_block</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">create!</span>({ <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;OK&quot;</span> }) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_record_exception">
            
              <b>test_invalid_record_exception</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_invalid_record_exception" name="method-i-test_invalid_record_exception" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_record_exception_source')" id="l_method-i-test_invalid_record_exception_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L54" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_invalid_record_exception_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 54</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_record_exception</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">create!</span> }
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">save!</span> }

  <span class="ruby-identifier">r</span> = <span class="ruby-constant">WrongReply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">invalid</span> = <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">r</span>, <span class="ruby-identifier">invalid</span>.<span class="ruby-identifier">record</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_should_be_the_opposite_of_valid">
            
              <b>test_invalid_should_be_the_opposite_of_valid</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_invalid_should_be_the_opposite_of_valid" name="method-i-test_invalid_should_be_the_opposite_of_valid" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_should_be_the_opposite_of_valid_source')" id="l_method-i-test_invalid_should_be_the_opposite_of_valid_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L222" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_invalid_should_be_the_opposite_of_valid_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_should_be_the_opposite_of_valid</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&#39;Things are going to change&#39;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_validator">
            
              <b>test_invalid_validator</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_invalid_validator" name="method-i-test_invalid_validator" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_validator_source')" id="l_method-i-test_invalid_validator_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L159" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_invalid_validator_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_validator</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validate</span> <span class="ruby-value">:i_dont_exist</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_list_of_validators_for_model">
            
              <b>test_list_of_validators_for_model</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_list_of_validators_for_model" name="method-i-test_list_of_validators_for_model" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_list_of_validators_for_model_source')" id="l_method-i-test_list_of_validators_for_model_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L241" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_list_of_validators_for_model_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 241</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_list_of_validators_for_model</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_length_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:presence</span>, <span class="ruby-value">:length</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:kind</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_list_of_validators_on_an_attribute">
            
              <b>test_list_of_validators_on_an_attribute</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_list_of_validators_on_an_attribute" name="method-i-test_list_of_validators_on_an_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_list_of_validators_on_an_attribute_source')" id="l_method-i-test_list_of_validators_on_an_attribute_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L249" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_list_of_validators_on_an_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 249</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_list_of_validators_on_an_attribute</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_length_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:title</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:presence</span>, <span class="ruby-value">:length</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:title</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:kind</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:content</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:presence</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:content</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:kind</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_list_of_validators_on_multiple_attributes">
            
              <b>test_list_of_validators_on_multiple_attributes</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_list_of_validators_on_multiple_attributes" name="method-i-test_list_of_validators_on_multiple_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_list_of_validators_on_multiple_attributes_source')" id="l_method-i-test_list_of_validators_on_multiple_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L264" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_list_of_validators_on_multiple_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_list_of_validators_on_multiple_attributes</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">length</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">10</span> }
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:author_name</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">format</span><span class="ruby-operator">:</span> <span class="ruby-regexp">/a/</span>

  <span class="ruby-identifier">validators</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:title</span>, <span class="ruby-value">:author_name</span>)

  <span class="ruby-identifier">assert_equal</span> [
    <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Validations</span><span class="ruby-operator">::</span><span class="ruby-constant">FormatValidator</span>,
    <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Validations</span><span class="ruby-operator">::</span><span class="ruby-constant">LengthValidator</span>,
    <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Validations</span><span class="ruby-operator">::</span><span class="ruby-constant">PresenceValidator</span>
  ], <span class="ruby-identifier">validators</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">class</span> }.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">to_s</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_list_of_validators_will_be_empty_when_empty">
            
              <b>test_list_of_validators_will_be_empty_when_empty</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_list_of_validators_will_be_empty_when_empty" name="method-i-test_list_of_validators_will_be_empty_when_empty" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_list_of_validators_will_be_empty_when_empty_source')" id="l_method-i-test_list_of_validators_will_be_empty_when_empty_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L277" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_list_of_validators_will_be_empty_when_empty_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_list_of_validators_will_be_empty_when_empty</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">length</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">10</span> }
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:author_name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition">
            
              <b>test_multiple_errors_per_attr_iteration_with_full_error_composition</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition" name="method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition_source')" id="l_method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L61" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_multiple_errors_per_attr_iteration_with_full_error_composition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_errors_per_attr_iteration_with_full_error_composition</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span>   = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Content is Empty&quot;</span>, <span class="ruby-identifier">errors</span>[<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Title is Empty&quot;</span>, <span class="ruby-identifier">errors</span>[<span class="ruby-number">1</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setup_is_deprecated_but_still_receives_klass">
            
              <b>test_setup_is_deprecated_but_still_receives_klass</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_setup_is_deprecated_but_still_receives_klass" name="method-i-test_setup_is_deprecated_but_still_receives_klass" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>validator test:</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setup_is_deprecated_but_still_receives_klass_source')" id="l_method-i-test_setup_is_deprecated_but_still_receives_klass_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L371" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setup_is_deprecated_but_still_receives_klass_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 371</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setup_is_deprecated_but_still_receives_klass</span> <span class="ruby-comment"># TODO: remove me in 4.2.</span>
  <span class="ruby-identifier">validator_class</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>(<span class="ruby-identifier">klass</span>)
      <span class="ruby-ivar">@old_klass</span> = <span class="ruby-identifier">klass</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">validate</span>(<span class="ruby-operator">*</span>)
      <span class="ruby-ivar">@old_klass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Topic</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#setup didn&#39;t work&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_with</span> <span class="ruby-identifier">validator_class</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">t</span>.<span class="ruby-identifier">valid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_single_attr_validation_and_error_msg">
            
              <b>test_single_attr_validation_and_error_msg</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_single_attr_validation_and_error_msg" name="method-i-test_single_attr_validation_and_error_msg" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_single_attr_validation_and_error_msg_source')" id="l_method-i-test_single_attr_validation_and_error_msg_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L29" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_single_attr_validation_and_error_msg_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_single_attr_validation_and_error_msg</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;There&#39;s no content!&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:content</span>].<span class="ruby-identifier">any?</span>, <span class="ruby-string">&quot;A reply without content should mark that attribute as invalid&quot;</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;is Empty&quot;</span>], <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;content&quot;</span>], <span class="ruby-string">&quot;A reply without content should contain an error&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_single_error_per_attr_iteration">
            
              <b>test_single_error_per_attr_iteration</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_single_error_per_attr_iteration" name="method-i-test_single_error_per_attr_iteration" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_single_error_per_attr_iteration_source')" id="l_method-i-test_single_error_per_attr_iteration_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L51" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_single_error_per_attr_iteration_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_single_error_per_attr_iteration</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">messages</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">messages</span>]}

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>([<span class="ruby-string">&quot;title&quot;</span>, <span class="ruby-string">&quot;is Empty&quot;</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">include?</span>([<span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-string">&quot;is Empty&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_single_field_validation">
            
              <b>test_single_field_validation</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_single_field_validation" name="method-i-test_single_field_validation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_single_field_validation_source')" id="l_method-i-test_single_field_validation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L18" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_single_field_validation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_single_field_validation</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;There&#39;s no content!&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">invalid?</span>, <span class="ruby-string">&quot;A reply without content shouldn&#39;t be savable&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">after_validation_performed</span>, <span class="ruby-string">&quot;after_validation callback should be called&quot;</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">content</span> = <span class="ruby-string">&quot;Messa content!&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">valid?</span>, <span class="ruby-string">&quot;A reply with content should be savable&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">after_validation_performed</span>, <span class="ruby-string">&quot;after_validation callback should be called&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_custom_exception">
            
              <b>test_strict_validation_custom_exception</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_custom_exception" name="method-i-test_strict_validation_custom_exception" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_custom_exception_source')" id="l_method-i-test_strict_validation_custom_exception_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L321" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_custom_exception_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_custom_exception</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-constant">CustomStrictValidationException</span>
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">CustomStrictValidationException</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_error_message">
            
              <b>test_strict_validation_error_message</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_error_message" name="method-i-test_strict_validation_error_message" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_error_message_source')" id="l_method-i-test_strict_validation_error_message_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L340" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_error_message_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 340</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_error_message</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>

  <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Title can&#39;t be blank&quot;</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_in_custom_validator_helper">
            
              <b>test_strict_validation_in_custom_validator_helper</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_in_custom_validator_helper" name="method-i-test_strict_validation_in_custom_validator_helper" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_in_custom_validator_helper_source')" id="l_method-i-test_strict_validation_in_custom_validator_helper_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L314" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_in_custom_validator_helper_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 314</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_in_custom_validator_helper</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_in_validates">
            
              <b>test_strict_validation_in_validates</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_in_validates" name="method-i-test_strict_validation_in_validates" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_in_validates_source')" id="l_method-i-test_strict_validation_in_validates_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L295" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_in_validates_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_in_validates</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_not_fails">
            
              <b>test_strict_validation_not_fails</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_not_fails" name="method-i-test_strict_validation_not_fails" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_not_fails_source')" id="l_method-i-test_strict_validation_not_fails_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L302" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_not_fails_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_not_fails</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;hello&quot;</span>).<span class="ruby-identifier">valid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_strict_validation_particular_validator">
            
              <b>test_strict_validation_particular_validator</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_strict_validation_particular_validator" name="method-i-test_strict_validation_particular_validator" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_strict_validation_particular_validator_source')" id="l_method-i-test_strict_validation_particular_validator_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L307" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_strict_validation_particular_validator_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_strict_validation_particular_validator</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span> }
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_throw_away_typing">
            
              <b>test_throw_away_typing</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_throw_away_typing" name="method-i-test_throw_away_typing" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_throw_away_typing_source')" id="l_method-i-test_throw_away_typing_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L101" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_throw_away_typing_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_throw_away_typing</span>
  <span class="ruby-identifier">d</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>, <span class="ruby-string">&quot;salary&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;100,000&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">100</span>, <span class="ruby-identifier">d</span>.<span class="ruby-identifier">salary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;100,000&quot;</span>, <span class="ruby-identifier">d</span>.<span class="ruby-identifier">salary_before_type_cast</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validate_block">
            
              <b>test_validate_block</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validate_block" name="method-i-test_validate_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validate_block_source')" id="l_method-i-test_validate_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L143" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validate_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validate_block</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validate</span> { <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-string">&quot;title&quot;</span>, <span class="ruby-string">&quot;will never be valid&quot;</span>) }
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Title&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;whatever&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;will never be valid&quot;</span>], <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;title&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validate_block_with_params">
            
              <b>test_validate_block_with_params</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validate_block_with_params" name="method-i-test_validate_block_with_params" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validate_block_with_params_source')" id="l_method-i-test_validate_block_with_params_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L151" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validate_block_with_params_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validate_block_with_params</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validate</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">topic</span><span class="ruby-operator">|</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-string">&quot;title&quot;</span>, <span class="ruby-string">&quot;will never be valid&quot;</span>) }
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Title&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;whatever&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>].<span class="ruby-identifier">any?</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;will never be valid&quot;</span>], <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;title&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_acceptance_of_as_database_column">
            
              <b>test_validates_acceptance_of_as_database_column</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_acceptance_of_as_database_column" name="method-i-test_validates_acceptance_of_as_database_column" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_acceptance_of_as_database_column_source')" id="l_method-i-test_validates_acceptance_of_as_database_column_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L108" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_acceptance_of_as_database_column_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 108</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_acceptance_of_as_database_column</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_acceptance_of</span>(<span class="ruby-value">:approved</span>)
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;approved&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>[<span class="ruby-string">&quot;approved&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_acceptance_of_with_non_existent_table">
            
              <b>test_validates_acceptance_of_with_non_existent_table</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_acceptance_of_with_non_existent_table" name="method-i-test_validates_acceptance_of_with_non_existent_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_acceptance_of_with_non_existent_table_source')" id="l_method-i-test_validates_acceptance_of_with_non_existent_table_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L93" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_acceptance_of_with_non_existent_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_acceptance_of_with_non_existent_table</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:IncorporealModel</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>)

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">IncorporealModel</span>.<span class="ruby-identifier">validates_acceptance_of</span>(<span class="ruby-value">:incorporeal_column</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_each">
            
              <b>test_validates_each</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_each" name="method-i-test_validates_each" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_each_source')" id="l_method-i-test_validates_each_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L117" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_each_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_each</span>
  <span class="ruby-identifier">hits</span> = <span class="ruby-number">0</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_each</span>(<span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>, [<span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span>, <span class="ruby-identifier">attr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span> <span class="ruby-identifier">attr</span>, <span class="ruby-string">&#39;gotcha&#39;</span>
    <span class="ruby-identifier">hits</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;valid&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;whatever&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">hits</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(gotcha gotcha)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(gotcha gotcha)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:content</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_each_custom_reader">
            
              <b>test_validates_each_custom_reader</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_each_custom_reader" name="method-i-test_validates_each_custom_reader" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_each_custom_reader_source')" id="l_method-i-test_validates_each_custom_reader_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L130" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_each_custom_reader_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_each_custom_reader</span>
  <span class="ruby-identifier">hits</span> = <span class="ruby-number">0</span>
  <span class="ruby-constant">CustomReader</span>.<span class="ruby-identifier">validates_each</span>(<span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>, [<span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span>, <span class="ruby-identifier">attr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span> <span class="ruby-identifier">attr</span>, <span class="ruby-string">&#39;gotcha&#39;</span>
    <span class="ruby-identifier">hits</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-constant">CustomReader</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;valid&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;whatever&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">hits</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(gotcha gotcha)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(gotcha gotcha)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:content</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_with_bang">
            
              <b>test_validates_with_bang</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_with_bang" name="method-i-test_validates_with_bang" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_with_bang_source')" id="l_method-i-test_validates_with_bang_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L328" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_with_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 328</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_with_bang</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates!</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validates_with_false_hash_value">
            
              <b>test_validates_with_false_hash_value</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validates_with_false_hash_value" name="method-i-test_validates_with_false_hash_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validates_with_false_hash_value_source')" id="l_method-i-test_validates_with_false_hash_value_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L335" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validates_with_false_hash_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 335</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validates_with_false_hash_value</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">valid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validation_order">
            
              <b>test_validation_order</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validation_order" name="method-i-test_validation_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validation_order_source')" id="l_method-i-test_validation_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L183" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validation_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validation_order</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_length_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;can&#39;t be blank&quot;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-string">&quot;title&quot;</span>].<span class="ruby-identifier">first</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>, <span class="ruby-value">:author_name</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validate</span> {<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-string">&#39;author_email_address&#39;</span>, <span class="ruby-string">&#39;will never be valid&#39;</span>)}
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_length_of</span> <span class="ruby-value">:title</span>, <span class="ruby-value">:content</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">key</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;can&#39;t be blank&quot;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">key</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;is too short (minimum is 2 characters)&#39;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">key</span>][<span class="ruby-number">1</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">:author_name</span>, <span class="ruby-identifier">key</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-number">1</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;can&#39;t be blank&quot;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">key</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">:author_email_address</span>, <span class="ruby-identifier">key</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-number">2</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;will never be valid&#39;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">key</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">:content</span>, <span class="ruby-identifier">key</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-number">3</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;is too short (minimum is 2 characters)&#39;</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-identifier">key</span>][<span class="ruby-number">0</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validation_with_if_and_on">
            
              <b>test_validation_with_if_and_on</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validation_with_if_and_on" name="method-i-test_validation_with_if_and_on" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validation_with_if_and_on_source')" id="l_method-i-test_validation_with_if_and_on_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L208" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validation_with_if_and_on_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validation_with_if_and_on</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span> <span class="ruby-value">:title</span>, <span class="ruby-identifier">if</span><span class="ruby-operator">:</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-string">&quot;bad&quot;</span>; <span class="ruby-keyword">true</span> }, <span class="ruby-identifier">on</span><span class="ruby-operator">:</span> <span class="ruby-value">:update</span>

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>)

  <span class="ruby-comment"># If block should not fire</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-comment"># If block should fire</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>(<span class="ruby-value">:update</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bad&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validation_with_message_as_proc">
            
              <b>test_validation_with_message_as_proc</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validation_with_message_as_proc" name="method-i-test_validation_with_message_as_proc" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validation_with_message_as_proc_source')" id="l_method-i-test_validation_with_message_as_proc_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L233" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validation_with_message_as_proc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 233</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validation_with_message_as_proc</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">validates_presence_of</span>(<span class="ruby-value">:title</span>, <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> { <span class="ruby-string">&quot;no blanks here&quot;</span>.<span class="ruby-identifier">upcase</span> })

  <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;NO BLANKS HERE&quot;</span>], <span class="ruby-identifier">t</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">:title</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validations_on_the_instance_level">
            
              <b>test_validations_on_the_instance_level</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validations_on_the_instance_level" name="method-i-test_validations_on_the_instance_level" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validations_on_the_instance_level_source')" id="l_method-i-test_validations_on_the_instance_level_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L282" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validations_on_the_instance_level_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validations_on_the_instance_level</span>
  <span class="ruby-identifier">auto</span> = <span class="ruby-constant">Automobile</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">assert</span>          <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">invalid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">make</span>  = <span class="ruby-string">&#39;Toyota&#39;</span>
  <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">model</span> = <span class="ruby-string">&#39;Corolla&#39;</span>
  <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-string">&#39;1&#39;</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">valid?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_validators">
            
              <b>test_validators</b>()
            
            <a href="../classes/ValidationsTest.html#method-i-test_validators" name="method-i-test_validators" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_validators_source')" id="l_method-i-test_validators_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/c5b76b5362e4ba28ff3a5649156c50dff9a86de7/activerecord/test/cases/validations_test.rb#L114" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_validators_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/validations_test.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_validators</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Parrot</span>.<span class="ruby-identifier">validators</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">validators</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Parrot</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:name</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">validators_on</span>(<span class="ruby-value">:name</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-validate">
            
              <b>validate</b>(*)
            
            <a href="../classes/ValidationsTest.html#method-i-validate" name="method-i-validate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-validate_source')" id="l_method-i-validate_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/bdf9141c039afc7ce56d6c69cfe50b60155e5359/activemodel/test/cases/validations_test.rb#L377" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-validate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activemodel/test/cases/validations_test.rb, line 377</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">validate</span>(<span class="ruby-operator">*</span>)
  <span class="ruby-ivar">@old_klass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Topic</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#setup didn&#39;t work&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    